{% for m in solicitudes %}
<tr id="solicitud-{{ m.id }}">
    <td class="ps-4 text-warning">WH {{ m.warehouse_id or '?' }}</td>
    <td>
        <div class="fw-bold">{{ m.sn_fisica }}</div>
        <div class="small text-white">{{ m.modelo }}</div>
    </td>
    <td class="text-danger">{{ m.diagnostico_detalle }}</td>
    <td class="text-end pe-4">
        <!-- HTMX en vez de JavaScript -->
        <button class="btn btn-primary btn-sm"
                hx-post="/api/lab/iniciar"
                hx-vals='{"id": "{{ m.id }}"}'
                hx-confirm="¿Recibir este equipo e iniciar diagnóstico en la Mesa de Trabajo?"
                hx-target="#solicitud-{{ m.id }}"
                hx-swap="outerHTML swap:500ms"
                hx-indicator="#spinner-{{ m.id }}">
            <i class="bi bi-tools"></i> RECIBIR Y REPARAR
            <span id="spinner-{{ m.id }}" class="htmx-indicator">
                <span class="spinner-border spinner-border-sm ms-2"></span>
            </span>
        </button>
    </td>
</tr>
{% else %}
<tr><td colspan="4" class="text-center py-4 text-white">Sin solicitudes pendientes.</td></tr>
{% endfor %}
